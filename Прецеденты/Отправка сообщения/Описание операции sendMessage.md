Описание операции sendMessage
Описания определяются для системных операций (system operations).
Системными называются операции, входящие в открытый интерфейс системы для обработки входных системных событий, которые система выполняет как «чёрный ящик».
Весь набор системных операций, выполняемых в процессе всех прецедентов, определяет открытый системный интерфейс (system interface), в ракурсе которого система рассматривается как единый компонент или класс.
В UML систему в целом можно представить в виде одного класса.

Операция:
sendMessage(text: String, attachments: List<FileRef>)
Ссылки:
Прецеденты: Отправка сообщения
Предусловия:
Инициирован активный чат (пользователь открыл существующий чат или создал новый).
Пользователь прошёл авторизацию и имеет право отправлять сообщения в данном чате.
При необходимости — вложения успешно загружены в систему хранения файлов.

Постусловия:
Создан экземпляр msg класса Message
(создание экземпляра)
Экземпляр msg связан с текущим экземпляром класса Chat
(формирование ассоциации между Chat и Message)
Атрибуту msg.text присвоено значение параметра text
(модификация атрибута)
Атрибуту msg.attachments присвоен список attachments
(модификация атрибута)
Экземпляр msg включён в коллекцию MessageList текущего чата
(обновление композиции Chat → MessageList)
Службе рассылки уведомлений отправлен запрос на доставку сообщения пользователям чата
(формирование взаимодействия с внешним компонентом NotificationService)
В экземпляре msg обновлён атрибут deliveryStatus = "sent"
(модификация состояния сообщения после успешной отправки)
